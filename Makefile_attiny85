all: build flash

build:
	avr-gcc -std=gnu99 -Os -mmcu=attiny85 -save-temps main_attiny85.c -o main_attiny85.elf
	avr-objcopy -O ihex main_attiny85.elf main_attiny85.hex

flash:
	avrdude -c linuxspi -p t85 -P /dev/spidev1.0 -U flash:w:main_attiny85.hex

clean:
	rm main_attiny85.elf main_attiny85.hex main_attiny85.i main_attiny85.o main_attiny85.s

.PHONY: clean
