all: build flash

build:
	avr-gcc -std=gnu99 -O3 -mmcu=atmega328p -save-temps main_atmega328P.c -o main_atmega328P.elf
	avr-objcopy -O ihex main_atmega328P.elf main_atmega328P.hex

flash:
	avrdude -c linuxspi -p m328p -P /dev/spidev1.0 -U flash:w:main_atmega328P.hex

clean:
	rm main_atmega328P.elf main_atmega328P.hex main_atmega328P.i main_atmega328P.o main_atmega328P.s

.PHONY: clean
